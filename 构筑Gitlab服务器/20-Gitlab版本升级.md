# Gitlab升级

## 1. 查询当前版本

- 直接查询版本

  ```
  cat /opt/gitlab/embedded/service/gitlab-rails/VERSION
  ```

## 2. 版本升级

升级过程中，需要保持 `Gitlab` 服务，处于正常服务状态，停止状态无法正常更新。

- 指令（例如升级到 `17.7.1` 的版本）

  ```
  sudo apt install gitlab-ce=17.7.1-ce.0
  ```

- 升级注意事项

  需要逐步升级，例如 `17.7.0` 升级的话，如果当前最新版本是 `17.10.1` 的话，需要按照如下方式升级：

  `17.7.0` → `17.7.7`  → `17.8.0`   → `17.8.6`  →  `17.9.0`  → `17.9.3` → `17.10.0` → `17.10.1`

- 更新参照网址

  https://gitlab-com.gitlab.io/support/toolbox/upgrade-path/

  根据如上介绍，安装步骤为：`17.7.0` → `17.8.6` → `17.10.1`

  经过确认，确实可以正常升级。





